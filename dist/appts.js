var Application;!function(t){var o;!function(t){var o=function(){function t(t,o,i,e,n,r){this.scope=t,this.gameVars=new o,this.workfactory=new e,this.foodfactory=new n,this.sleepfactory=new r,this.scope.gameStarted=!1,this.listfood=this.foodfactory.getFoodList(),this.lastScore=localStorage.getItem("lastScore"),this.interval=i}return t.prototype.initGameVars=function(){this.lifePoints=this.gameVars.getLifePoints(),this.moodPoints=this.gameVars.getMoodPoints(),this.tiredPoints=this.gameVars.getTiredPoints(),this.hasWorked=!1,this.hasSlept=!1,this.scope.gameStarted=!0,this.scope.onAction=!1,this.scope.state="good",this.scope.score=0,this.scope.lastScore=this.lastScore,this.money=this.gameVars.getMoney(),this.becomeOlder()},t.prototype.becomeOlder=function(){var t=this,o=this.lifePoints;console.log("init pdv = "+o),this.cycle=setInterval(function(){t.scope.$apply(function(){t.setOlderVariables(),t.scope.score++,localStorage.setItem("lastScore",JSON.stringify(t.scope.score))})},5e3)},t.prototype.isDead=function(){clearInterval(this.cycle),this.scope.gameStarted=!1,this.scope.state="dead"},t.prototype.setOlderVariables=function(){return this.lifePoints--,this.lifePoints<=0?(this.isDead(),!1):(this.hasWorked||(this.lifePoints-=3),this.hasSlept||(this.hasWorked&&(this.tiredPoints+=5,this.moodPoints-=5),this.tiredPoints+=10),this.tiredPoints>=100&&(this.lifePoints-=15,this.moodPoints-=15),this.hasWorked=!1,this.hasSlept=!1,void console.log(this.lifePoints))},t.prototype.setActionVariables=function(t){this.lifePoints+=t.life,this.moodPoints+=t.mood,this.tiredPoints+=t.tired,this.money+=t.money,this.scope.workingVariables=t},t.prototype.goToWork=function(){this.scope.onAction=!0,this.scope.state="bad",this.setActionVariables(this.workfactory.working(this.tiredPoints)),this.hasWorked=!0,this.waitingAction(2e3)},t.prototype.goToSleep=function(){this.scope.onAction=!0,this.scope.state="dead",this.setActionVariables(this.sleepfactory.sleeping(this.tiredPoints)),this.hasSlept=!0,this.waitingAction(3e3)},t.prototype.goEating=function(t){console.log(t),this.scope.onAction=!0,this.scope.state="bad",this.waitingAction(1e3),this.setActionVariables(this.foodfactory.eating(t))},t.prototype.waitingAction=function(t){var o=this;setTimeout(function(){o.scope.$apply(function(){o.scope.onAction=!1,o.scope.state="good"})},t)},t}();t.HomeController=o}(o=t.Controllers||(t.Controllers={}))}(Application||(Application={}));var Application;!function(t){var o;!function(t){var o=function(){function t(){this.gamevars=this.initGamevars()}return t.prototype.initGamevars=function(){this.lifePoints=100,this.moodPoints=100,this.tiredPoints=0,this.money=50},t.prototype.getLifePoints=function(){return this.lifePoints},t.prototype.getMoodPoints=function(){return this.moodPoints},t.prototype.getTiredPoints=function(){return this.tiredPoints},t.prototype.getMoney=function(){return this.money},t}();t.gamevarsfactory=o}(o=t.Factories||(t.Factories={}))}(Application||(Application={}));var Application;!function(t){var o;!function(t){var o=function(){function t(){}return t.prototype.working=function(t){var o=new Array;return o.money=1,o.tired=1,o.mood=-1,o.life=-1,t>=30&&50>t?o.life=-2:t>50&&(o.life=-3),console.log(o),o},t}();t.workfactory=o}(o=t.Factories||(t.Factories={}))}(Application||(Application={}));var Application;!function(t){var o;!function(t){var o=function(){function t(){}return t.prototype.getFoodList=function(){var t={carrotes:{name:"carrotes",price:-5,life:1,mood:-1},epinards:{name:"epinards",price:-5,life:2,mood:-3},burger:{name:"burger",price:-1,life:-2,mood:3},coca:{name:"coca",price:-1,life:-2,mood:3},gateau:{name:"gateau",price:-2,life:0,mood:2}};return t},t.prototype.eating=function(t){var o=new Array,i=this.getFoodList();return o.money=i[t].price,o.tired=0,o.mood=i[t].mood,o.life=i[t].life,console.log(o),o},t}();t.foodfactory=o}(o=t.Factories||(t.Factories={}))}(Application||(Application={}));var Application;!function(t){var o;!function(t){var o=function(){function t(){}return t.prototype.sleeping=function(t){var o=new Array;return o.money=0,o.tired=-10,o.mood=5,o.life=5,o},t}();t.sleepfactory=o}(o=t.Factories||(t.Factories={}))}(Application||(Application={}));var appModule=angular.module("tamangularApp",[]);appModule.controller("HomeController",["$scope","gamevarsfactory","$interval","workfactory","foodfactory","sleepfactory",function(t,o,i,e,n,r){return new Application.Controllers.HomeController(t,o,i,e,n,r)}]),appModule.factory("gamevarsfactory",function(){return Application.Factories.gamevarsfactory}),appModule.factory("workfactory",function(){return Application.Factories.workfactory}),appModule.factory("foodfactory",function(){return Application.Factories.foodfactory}),appModule.factory("sleepfactory",function(){return Application.Factories.sleepfactory});var Application;!function(t){var o;!function(t){var o=function(){function t(){}return t.prototype.gettingOlder=function(t){setInterval(function(t){return console.log("plop",t),this.lifePoints-=1},1e3)},t}();t.cyclefactory=o}(o=t.Factories||(t.Factories={}))}(Application||(Application={}));